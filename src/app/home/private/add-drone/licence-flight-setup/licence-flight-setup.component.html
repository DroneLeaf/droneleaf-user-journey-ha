<!-- OUTERMOST: Full screen height -->
<div class="flex h-[96vh] bg-white text-black">
  <!-- ✅ LEFT SIDE -->
  <div class="flex flex-col justify-between flex-1 px-6 py-6">
    <!-- ✅ Top Bar -->
    <div class="flex justify-between items-center">
      <img src="../../../../../assets/svgs/private/Group 1597881310.svg" alt="DroneLeaf Logo" class="h-16" />
      <app-help-button></app-help-button>
    </div>

    <div class="space-y-3">
      <!-- Step 1 -->
      <div class="border rounded-md p-4">
        <div class="flex justify-between items-center">
          <span class="font-medium">Step 1: Copy Your Flight API Key</span>
          <span *ngIf="step1Completed" class="text-[#009169] font-semibold flex gap-2 text-center">
            <svg class="mt-1" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10.6654 8.60065V11.4007C10.6654 13.734 9.73203 14.6673 7.3987 14.6673H4.5987C2.26536 14.6673 1.33203 13.734 1.33203 11.4007V8.60065C1.33203 6.26732 2.26536 5.33398 4.5987 5.33398H7.3987C9.73203 5.33398 10.6654 6.26732 10.6654 8.60065Z" fill="#009169"/>
              <path d="M11.3998 1.33398H8.59984C6.67914 1.33398 5.71152 1.97092 5.42907 3.49325C5.32748 4.04082 5.79484 4.50065 6.35175 4.50065H7.39984C10.1998 4.50065 11.4998 5.80065 11.4998 8.60065V9.64875C11.4998 10.2057 11.9597 10.673 12.5072 10.5714C14.0296 10.289 14.6665 9.32135 14.6665 7.40065V4.60065C14.6665 2.26732 13.7332 1.33398 11.3998 1.33398Z" fill="#009169"/>
              </svg>
               Copied
          </span>
        </div>
        <span *ngIf="!step1Completed" class="text-[#9A9A9A] text-sm">This key is unique to your drone license. You’ll need it to link your drone controller.</span>


        <div class="mt-2" *ngIf="!step1Completed">
          <label class="text-[#3A3B3E] text-sm mr-2">API Key</label>
          <div class="flex items-center border border-[#009169] rounded-md overflow-hidden w-full">
            <input type="text" #apiInput class="flex-1 px-4 py-2 bg-white text-sm outline-none"
              placeholder="Enter API Key" [value]="apiKey" />

            <button (click)="copyApiKey()"
              class="flex items-center bg-white text-sm px-4 py-2 h-full transition disabled:opacity-60 disabled:cursor-not-allowed"
              style="border-left: 1px solid #009169;">
              <svg class="w-5 mr-1" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M10.6673 8.60065V11.4007C10.6673 13.734 9.73398 14.6673 7.40065 14.6673H4.60065C2.26732 14.6673 1.33398 13.734 1.33398 11.4007V8.60065C1.33398 6.26732 2.26732 5.33398 4.60065 5.33398H7.40065C9.73398 5.33398 10.6673 6.26732 10.6673 8.60065Z"
                  fill="#009169" />
                <path
                  d="M11.3998 1.33398H8.59984C6.67914 1.33398 5.71152 1.97092 5.42907 3.49325C5.32748 4.04082 5.79484 4.50065 6.35175 4.50065H7.39984C10.1998 4.50065 11.4998 5.80065 11.4998 8.60065V9.64875C11.4998 10.2057 11.9597 10.673 12.5072 10.5714C14.0296 10.289 14.6665 9.32135 14.6665 7.40065V4.60065C14.6665 2.26732 13.7332 1.33398 11.3998 1.33398Z"
                  fill="#009169" />
              </svg>

              Copy API Key
            </button>
          </div>

          <div class="mt-3 border border-[#FFC700] bg-[#FFF6D6]  p-3 rounded-md text-sm">
            ⚠️ Keep this key private — it’s required for authenticated drone flights.
          </div>
        </div>
      </div>

      <!-- Step 2 -->
      <div class="border rounded-md p-4">
        <div class="flex justify-between items-center">
          <span class="font-medium">Step 2: Paste Your Flight API Key</span>
        </div>
        <!-- Content visible only if step1 done and step2 not done -->
        <span *ngIf="step1Completed && !step2Completed" class="text-[#9A9A9A] text-sm">Open the Controller Dashboard in a new window and paste your key to establish the secure link.</span>
        <div *ngIf="step1Completed && !step2Completed" class="mt-3">
          <button (click)="completeStep2()" class="bg-[#009169] text-white px-4 py-2 rounded-md ">
            Open CC Dashboard on a New Window
          </button>

          <div class="mt-3 border border-[#FFC700] bg-[#FFF6D6] p-3 rounded-md text-sm">
            ⚠️ Make sure the controller is powered and connected to the same network.
          </div>
        </div>
      </div>

      <!-- Step 3 -->
      <div class="border rounded-md p-4">
        <div class="flex justify-between items-center">
          <span class="font-medium">Step 3: Install DroneLeafQGC</span>
        </div>

        <!-- Content visible only if step2 done -->
        <div *ngIf="step2Completed" class="mt-3">
          <p class="text-sm text-gray-600">
            DroneLeafQGC is required to run and monitor drone flights.
          </p>

          <div class="mt-3 flex gap-3">
            <button class="bg-[#009169] text-white px-4 py-2 rounded-md">
              Download DroneLeafQGC
            </button>
            <button class="bg-[#001D15] text-white px-4 py-2 rounded-md hover:bg-gray-900">
              I Already Have It
            </button>
          </div>

          <div class="mt-3 border border-yellow-300 bg-yellow-50 p-3 rounded-md text-sm">
            ⚠️ If already installed, just click "I Already Have It" to continue.
          </div>
        </div>
      </div>
    </div>






    <hr class="relative top-[5rem]">
    <!-- ✅ Bottom Buttons -->
    <div class="flex flex-col md:flex-row justify-between items-center gap-4 mt-5">
      <button type="button"
        class="bg-red-600 text-white font-semibold py-2 px-6 rounded-md hover:bg-red-700 w-full md:w-auto"
        (click)="onCancelClick()">
        Cancel
      </button>

      <div class="flex gap-4 w-full md:w-auto">
        <button
          class="border-1 border-[#009169] text-gray-700 font-semibold py-2 px-6 rounded-md hover:bg-gray-100 w-full md:w-auto"
          style="border: 1px solid #009169;" (click)="back.emit()">
          Back
        </button>

        <button
          class="text-white font-semibold bg-[#009169] py-2 px-6 rounded-md transition-colors duration-200 w-full md:w-auto"
          (click)="this.next.emit()">
          Continue
        </button>
      </div>
    </div>
  </div>

  <!-- ✅ Right Stepper Sidebar -->
  <div class="w-96 bg-[#cce9e1] p-6 flex flex-col justify-around">
    <app-add-drone-stepper [steps]="steps" [currentStepIndex]="currentStepIndex">
    </app-add-drone-stepper>


    <div class="mt-8">
      <h4 class="text-[22px] font-semibold text-gray-800 mb-1">Add A Drone</h4>
      <p class="text-[16px] text-gray-600">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore
        magna aliqua.
      </p>
    </div>
  </div>
</div>


<app-confirm-cancel-model [show]="cancelModalVisible" (confirm)="cancelConfirmed()"
  (cancel)="cancelDismissed()"></app-confirm-cancel-model>
