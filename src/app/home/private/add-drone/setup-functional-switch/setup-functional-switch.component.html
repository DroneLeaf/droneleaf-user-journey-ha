<div class="flex flex-col md:flex-row h-[96vh] text-black">
  <!-- Main Left -->
  <div class="flex-1 px-6 md:px-6 pt-8 pb-4 flex flex-col justify-between">
    <!-- Top Header -->
    <div class="flex justify-between items-center py-4">
      <img src="../../../../../assets/svgs/private/Group 1597881310.svg" alt="DroneLeaf Logo" class="h-14" />
      <app-help-button></app-help-button>
    </div>

    <!-- Main Content Area -->
    <div class="p-6 space-y-6">
      <!-- Heading -->
      <h2 class="text-xl font-semibold">Set Up Additional Functional Switches</h2>
      <p class="text-gray-600">
        Configure optional switches for advanced flight control. You can skip this setup at any time.
      </p>

      <!-- Hardware Note -->
      <div class="p-4 bg-yellow-50 border border-yellow-400 rounded text-left">
        <p class="font-semibold text-yellow-800">⚠️ Hardware note</p>
        <p class="text-sm text-yellow-700 ml-6">
          Switch A uses a <strong>three-position latching switch (Channel 11)</strong>.
          Switch B uses a <strong>two-position momentary switch (Channel 12)</strong>.
        </p>
      </div>

      <!-- START SCREEN -->
      <div *ngIf="!started" class="flex flex-col items-center">
        <!-- Start Button -->
        <div class="circle-wrapper" (click)="onStart()">
          <!-- OUTER CIRCLE -->
          <svg class="circle-svg" width="220" height="220">
            <circle cx="110" cy="110" r="90" stroke="#e5f4f0" stroke-width="60" fill="none" />
          </svg>
          <!-- MIDDLE CIRCLE -->
          <svg class="circle-svg" width="200" height="200">
            <circle cx="100" cy="100" r="75" stroke="#e0f4ef" stroke-width="50" fill="none" />
          </svg>
          <!-- INNER CIRCLE -->
          <svg class="circle-svg" width="160" height="160">
            <circle cx="80" cy="80" r="60" stroke="#ceeae3" stroke-width="40" fill="none" />
          </svg>
          <!-- TEXT -->
          <div class="circle-text">Start</div>
        </div>

        <p class="text-gray-500 mt-4">When you're ready, press Start to begin or press skip.</p>

        <!-- Skip Button -->
        <button class="mt-4 px-6 py-2 border border-[#353535] rounded hover:bg-gray-100"
          style="border: 1px solid #353535;">
          Skip Switch Setup
        </button>
      </div>

      <!-- STEPS SCREEN -->
   <!-- STEPS SCREEN -->
<div *ngIf="started" class="space-y-4 text-left">
  <div *ngFor="let s of step; let i = index" class="p-3 border rounded">

    <!-- Step Label -->
    <div class="flex justify-between items-center">
      <span>{{ s.label }}</span>

      <!-- Show "Done" button only for active step -->
      <button *ngIf="i === activeStepIndex && !s.done"
              class="px-4 py-1 bg-[#009169] text-white rounded"
              (click)="markDone(i)">Done</button>

      <!-- Tick icon for completed -->
      <span *ngIf="s.done" class="text-green-600 font-bold">
        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M14.9987 0.833984C7.19286 0.833984 0.832031 7.19482 0.832031 15.0007C0.832031 22.8065 7.19286 29.1673 14.9987 29.1673C22.8045 29.1673 29.1654 22.8065 29.1654 15.0007C29.1654 7.19482 22.8045 0.833984 14.9987 0.833984ZM21.7704 11.7423L13.7379 19.7748C13.5395 19.9732 13.2704 20.0865 12.987 20.0865C12.7037 20.0865 12.4345 19.9732 12.2362 19.7748L8.22703 15.7657C7.8162 15.3548 7.8162 14.6748 8.22703 14.264C8.63786 13.8532 9.31786 13.8532 9.7287 14.264L12.987 17.5223L20.2687 10.2407C20.6795 9.82982 21.3595 9.82982 21.7704 10.2407C22.1812 10.6515 22.1812 11.3173 21.7704 11.7423Z" fill="#1BAF5D"/>
          </svg>

      </span>
    </div>

    <!-- Step Description -->
    <p *ngIf="i === activeStepIndex && !s.done"
       class="text-sm text-gray-500 mt-2">{{ s.description }}</p>
  </div>

  <!-- ✅ Success box now inside same container -->
  <div *ngIf="finished"
       class="p-4 bg-green-50 border border-green-400 rounded text-left">
    <p class="font-semibold flex gap-1 text-green-800">
      <svg width="20"  viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M14.9987 0.833984C7.19286 0.833984 0.832031 7.19482 0.832031 15.0007C0.832031 22.8065 7.19286 29.1673 14.9987 29.1673C22.8045 29.1673 29.1654 22.8065 29.1654 15.0007C29.1654 7.19482 22.8045 0.833984 14.9987 0.833984ZM21.7704 11.7423L13.7379 19.7748C13.5395 19.9732 13.2704 20.0865 12.987 20.0865C12.7037 20.0865 12.4345 19.9732 12.2362 19.7748L8.22703 15.7657C7.8162 15.3548 7.8162 14.6748 8.22703 14.264C8.63786 13.8532 9.31786 13.8532 9.7287 14.264L12.987 17.5223L20.2687 10.2407C20.6795 9.82982 21.3595 9.82982 21.7704 10.2407C22.1812 10.6515 22.1812 11.3173 21.7704 11.7423Z" fill="#1BAF5D"/>
        </svg>
         All set!
    </p>
    <p class="text-sm text-green-700 ml-6">
      You can revisit this setup later from your drone's settings.
    </p>
  </div>
</div>


      <!-- SUCCESS MESSAGE -->
    </div>



    <hr />

    <!-- Bottom Buttons -->
    <div class="pt-6 flex flex-col md:flex-row justify-between items-center gap-4">
      <button type="button"
        class="bg-red-600 text-white font-semibold py-2 px-6 rounded-md hover:bg-red-700 w-full md:w-auto"
        (click)="onCancelClick()">
        Cancel
      </button>

      <div class="flex gap-4 w-full md:w-auto">
        <button
          class="border border-[#009169] text-gray-700 font-semibold py-2 px-6 rounded-md hover:bg-gray-100 w-full md:w-auto"
          style="border: 1px solid #009169;" (click)="back.emit()">
          Back
        </button>
        <button class="bg-[#009169] text-white font-semibold py-2 px-6 rounded-md hover:bg-[#007e57] w-full md:w-auto"
          (click)="next.emit()">
          Continue
        </button>
      </div>
    </div>
  </div>

  <!-- Right Sidebar Stepper -->
  <div class="w-full md:w-96 bg-[#cce9e1] p-6 flex flex-col justify-between">
    <app-add-drone-stepper [steps]="steps" [currentStepIndex]="currentStepIndex"></app-add-drone-stepper>

    <div class="mt-8">
      <h4 class="text-[22px] font-semibold text-gray-800 mb-1">
        Add A Drone
      </h4>
      <p class="text-[16px] text-gray-600">
        This step ensures your Remote Control is properly configured before
        finalizing the setup.
      </p>
    </div>
  </div>
</div>
